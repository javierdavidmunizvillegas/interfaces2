2021-07-22 T 16:49:05 || VALIDADOR REQUEST: {"Value":{"SessionId":"","APSettlementTransactionHeaderList":null,"StatusId":false,"TimeStartEnd":null,"ErrorList":["The IdReciboCobro field is required."]},"Formatters":[],"ContentTypes":[],"DeclaredType":null,"StatusCode":400}
2021-07-22 T 16:49:20 || CONTROLADOR: Request Recibido: {"DataAreaId":"000001","Enviroment":"TEST","APSettlementTransactionHeaderList":[{"VoucherSettlement":"ARPM000968","IdReciboCobro":"2","DateTrans":"0001-01-01T00:00:00","InvoiceId":"","Amount":433.00,"APDocumentList":[{"Voucher":"INV-10000728","InvoiceId":"001-001-000000016","Amount":151.20,"VoucherId":null,"ErrorList":null},{"Voucher":"INV-10000724","InvoiceId":"001-001-000000012","Amount":26.88,"VoucherId":null,"ErrorList":null},{"Voucher":"INV-10000724","InvoiceId":"001-001-000000012","Amount":26.88,"VoucherId":null,"ErrorList":null}],"StatusId":false}],"CustAccount":"1714740089001","SessionId":null}
2021-07-22 T 16:49:25 || WS HOMOLOGACION : Número de  intentos realizados : 0, Tiempo Transcurrido : 5005 ms.
2021-07-22 T 16:49:25 || CONTROLADOR: Request Enviado a Dynamics: {"DataAreaId":"0001","Enviroment":"TEST","APSettlementTransactionHeaderList":[{"VoucherSettlement":"ARPM000968","IdReciboCobro":"2","DateTrans":"0001-01-01T00:00:00","InvoiceId":"","Amount":433.00,"APDocumentList":[{"Voucher":"INV-10000728","InvoiceId":"001-001-000000016","Amount":151.20,"VoucherId":null,"ErrorList":null},{"Voucher":"INV-10000724","InvoiceId":"001-001-000000012","Amount":26.88,"VoucherId":null,"ErrorList":null},{"Voucher":"INV-10000724","InvoiceId":"001-001-000000012","Amount":26.88,"VoucherId":null,"ErrorList":null}],"StatusId":false}],"CustAccount":"1714740089001","SessionId":"33138508-faf9-4f3f-8e32-4f4fcc3ed9a6"}
2021-07-22 T 16:50:04 || CONTROLADOR: ERROR: Azure.Messaging.ServiceBus.ServiceBusException: No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión. ErrorCode: ConnectionRefused (ServiceCommunicationProblem)
 ---> System.Net.Sockets.SocketException (10061): No se puede establecer una conexión ya que el equipo de destino denegó expresamente dicha conexión.
   at Azure.Messaging.ServiceBus.Amqp.AmqpConnectionScope.CreateAndOpenConnectionAsync(Version amqpVersion, Uri serviceEndpoint, ServiceBusTransportType transportType, IWebProxy proxy, String scopeIdentifier, TimeSpan timeout)
   at Microsoft.Azure.Amqp.FaultTolerantAmqpObject`1.OnCreateAsync(TimeSpan timeout)
   at Microsoft.Azure.Amqp.Singleton`1.GetOrCreateAsync(TimeSpan timeout)
   at Microsoft.Azure.Amqp.Singleton`1.GetOrCreateAsync(TimeSpan timeout)
   at Azure.Messaging.ServiceBus.Amqp.AmqpConnectionScope.OpenSenderLinkAsync(String entityPath, String identifier, TimeSpan timeout, CancellationToken cancellationToken)
   at Azure.Messaging.ServiceBus.Amqp.AmqpSender.CreateLinkAndEnsureSenderStateAsync(TimeSpan timeout, CancellationToken cancellationToken)
   at Microsoft.Azure.Amqp.FaultTolerantAmqpObject`1.OnCreateAsync(TimeSpan timeout)
   at Microsoft.Azure.Amqp.Singleton`1.GetOrCreateAsync(TimeSpan timeout)
   at Microsoft.Azure.Amqp.Singleton`1.GetOrCreateAsync(TimeSpan timeout)
   at Azure.Messaging.ServiceBus.Amqp.AmqpSender.SendBatchInternalAsync(Func`1 messageFactory, TimeSpan timeout, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Azure.Messaging.ServiceBus.Amqp.AmqpSender.SendBatchInternalAsync(Func`1 messageFactory, TimeSpan timeout, CancellationToken cancellationToken)
   at Azure.Messaging.ServiceBus.Amqp.AmqpSender.<>c__DisplayClass20_0.<<SendAsync>b__1>d.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at Azure.Messaging.ServiceBus.ServiceBusRetryPolicy.RunOperation(Func`2 operation, TransportConnectionScope scope, CancellationToken cancellationToken)
   at Azure.Messaging.ServiceBus.ServiceBusRetryPolicy.RunOperation(Func`2 operation, TransportConnectionScope scope, CancellationToken cancellationToken)
   at Azure.Messaging.ServiceBus.Amqp.AmqpSender.SendAsync(IReadOnlyList`1 messages, CancellationToken cancellationToken)
   at Azure.Messaging.ServiceBus.ServiceBusSender.SendMessagesAsync(IEnumerable`1 messages, CancellationToken cancellationToken)
   at Azure.Messaging.ServiceBus.ServiceBusSender.SendMessageAsync(ServiceBusMessage message, CancellationToken cancellationToken)
   at ICOB001.api.Infraestructure.Services.ManejadorRequest`1.EnviarMensajeAsync(String sesionId, String cadenaConexion, String nombreQueueRequest, T body) in C:\Users\henry\Desktop\INFORMACION_PWC\CODIGO\INTERFACES\PENDIENTES LOG\ICOB001.api\ICOB001.api\Infraestructure\Services\ManejadorRequest.cs:line 29
   at ICOB001.api.Infraestructure.Services.ManejadorRequest`1.EnviarMensajeAsync(String sesionId, String cadenaConexion, String nombreQueueRequest, T body) in C:\Users\henry\Desktop\INFORMACION_PWC\CODIGO\INTERFACES\PENDIENTES LOG\ICOB001.api\ICOB001.api\Infraestructure\Services\ManejadorRequest.cs:line 33
   at ICOB001.api.Controllers.ICOB001001Controller.APICOB001001(APICOB001001MessageRequest parametrorequest) in C:\Users\henry\Desktop\INFORMACION_PWC\CODIGO\INTERFACES\PENDIENTES LOG\ICOB001.api\ICOB001.api\Controllers\ICOB001001Controller.cs:line 98
